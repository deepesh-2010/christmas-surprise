<!DOCTYPE html>
<html>
<head>
  <title>Christmas Surprise Recorder</title>
</head>
<body style="text-align:center; background:#000; color:#1fffef; font-family:sans-serif; padding:20px;">
  <h1>ðŸŽ¥ Record Your Christmas Reaction!</h1>
  <video id="preview" autoplay muted style="width:80%; border:2px solid #1fffef;"></video>
  <br><br>
  <button onclick="startRecording()" style="padding:10px 20px; font-size:16px;">Start 2-Minute Recording</button>

  <script>
    let mediaRecorder;
    let recordedChunks = [];

    async function startRecording() {
      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      document.getElementById('preview').srcObject = stream;

      mediaRecorder = new MediaRecorder(stream);
      recordedChunks = [];

      mediaRecorder.ondataavailable = e => {
        if (e.data.size > 0) recordedChunks.push(e.data);
      };

      mediaRecorder.onstop = () => {
        const blob = new Blob(recordedChunks, { type: 'video/webm' });
        const url = URL.createObjectURL(blob);

        // Auto-download
        const a = document.createElement('a');
        a.href = url;
        a.download = 'recording.webm';
        document.body.appendChild(a);
        a.click();

        // Optional: show preview
        const video = document.createElement('video');
        video.controls = true;
        video.src = url;
        video.style = "margin-top:20px; width:80%; border:2px solid #1fffef;";
        document.body.appendChild(video);
      };

      mediaRecorder.start();
      setTimeout(() => {
        mediaRecorder.stop();
        stream.getTracks().forEach(track => track.stop());
      }, 2 * 60 * 1000); // 2 minutes
    }
  </script>
</body>
</html>